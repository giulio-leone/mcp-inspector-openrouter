<!DOCTYPE html>
<!--
 Copyright 2026 Google LLC
 SPDX-License-Identifier: Apache-2.0
-->

<html>

<head>
  <title>Tool Inspector</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
<theme-provider>
  <!-- Tab bar -->
  <nav class="tab-bar">
    <button class="tab-btn active" data-tab="tools"><span class="tab-icon" id="icon-tools"></span> Tools</button>
    <button class="tab-btn" data-tab="chat"><span class="tab-icon" id="icon-chat"></span> Chat</button>
  </nav>

  <!-- ‚ïê‚ïê‚ïê Tools tab ‚ïê‚ïê‚ïê -->
  <div class="tab-panel active" id="tab-tools">
    <div class="section-header-row">
      <div class="lock-toggle">
        <label class="toggle-switch">
          <input type="checkbox" id="lockToggle">
          <span class="toggle-slider"></span>
        </label>
        <span id="lockLabel" class="lock-label live">üîì Live</span>
      </div>
    </div>

    <div id="status"></div>

    <div class="table-container">
      <table id="resultsTable">
        <thead>
          <tr id="tableHeaderRow"></tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>
      <div id="copyToClipboard">
        <span id="copyAsScriptToolConfig">üìù Copy as ScriptToolConfig</span>
        <span id="copyAsJSON">üìù Copy as JSON</span>
      </div>
    </div>

    <!-- Manual Tool Execution -->
    <div class="card">
      <div class="card-title">Manual Tool Execution</div>
      <div class="form-group">
        <label for="toolNames">Tool</label>
        <select id="toolNames"></select>
      </div>
      <div class="form-group">
        <label for="inputArgsText">Input Arguments</label>
        <textarea id="inputArgsText">{"text": "hello world"}</textarea>
      </div>
      <div class="form-group">
        <button id="executeBtn">Execute Tool</button>
      </div>
      <pre id="toolResults"></pre>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê Chat tab ‚ïê‚ïê‚ïê -->
  <div class="tab-panel" id="tab-chat">
    <!-- API key hint (shown when not configured) -->
    <div id="apiKeyHint" class="api-key-hint" style="display:none">
      ‚ö†Ô∏è API key not configured.
      <a href="#" id="openOptionsLink">Open extension settings</a> to set it up.
    </div>

    <!-- Conversation selector -->
    <div class="chat-header">
      <select id="conversationSelect"></select>
      <button id="newChatBtn" class="icon-btn" title="New chat">Ôºã</button>
      <button id="deleteChatBtn" class="icon-btn danger" title="Delete conversation">üóë</button>
      <button id="plan-toggle" class="plan-mode-toggle icon-btn" title="Toggle plan mode"><span id="icon-plan"></span> Plan</button>
    </div>

    <!-- Chat bubbles -->
    <chat-container id="chatContainer"></chat-container>

    <!-- Sticky input area -->
    <div class="chat-input-area">
      <div class="chat-input-row">
        <textarea id="userPromptText" placeholder="Send a message..." rows="2"></textarea>
        <button id="promptBtn" disabled title="Send">‚ñ∂</button>
      </div>
      <div class="chat-input-actions">
        <button id="traceBtn" class="secondary small">Copy trace</button>
        <button id="debugLogBtn" class="secondary small" title="Download debug log">üêõ Debug log</button>
      </div>
    </div>
  </div>

  <!-- Security confirmation dialog for mutation-tier inferred tools -->
  <dialog id="securityDialog" class="security-dialog">
    <div class="dialog-body">
      <p class="dialog-title">‚ö†Ô∏è <span id="dialogToolName"></span></p>
      <p class="dialog-desc" id="dialogDesc"></p>
      <div class="dialog-actions">
        <button id="dialogCancel" class="btn-cancel">Cancel</button>
        <button id="dialogConfirm" class="btn-danger">Execute</button>
      </div>
    </div>
  </dialog>

  <script src="sidebar.js"></script>
</theme-provider>
</body>

</html>