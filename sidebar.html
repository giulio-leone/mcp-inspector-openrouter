<!DOCTYPE html>
<!--
 Copyright 2026 Google LLC
 SPDX-License-Identifier: Apache-2.0
-->

<html>

<head>
  <title>Tool Inspector</title>
  <meta charset="utf-8">
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <div class="container">
    <div class="section-header-row">
      <h2 class="collapsible-header">WebMCP Tools</h2>
      <div class="lock-toggle">
        <label class="toggle-switch">
          <input type="checkbox" id="lockToggle">
          <span class="toggle-slider"></span>
        </label>
        <span id="lockLabel" class="lock-label live">üîì Live</span>
      </div>
    </div>
    <div class="section-content">

      <div id="status"></div>

      <div class="table-container">
        <table id="resultsTable">
          <thead>
            <tr id="tableHeaderRow"></tr>
          </thead>
          <tbody id="tableBody"></tbody>
        </table>
        <div id="copyToClipboard">
          <span id="copyAsScriptToolConfig">üìù Copy as ScriptToolConfig</span>
          <span id="copyAsJSON">üìù Copy as JSON</span>
        </div>
      </div>
    </div>

    <h2 class="collapsible-header">AI Chat</h2>
    <div class="section-content">

      <!-- Conversation selector -->
      <div class="chat-header">
        <select id="conversationSelect"></select>
        <button id="newChatBtn" class="icon-btn" title="New chat">Ôºã</button>
        <button id="deleteChatBtn" class="icon-btn danger" title="Delete conversation">üóë</button>
      </div>

      <!-- Chat bubbles -->
      <div id="chatContainer" class="chat-container"></div>

      <!-- Input area -->
      <div class="chat-input-row">
        <textarea id="userPromptText" placeholder="Send a message..." rows="2"></textarea>
        <button id="promptBtn" disabled title="Send">‚ñ∂</button>
      </div>

      <div class="form-group settings-group">
        <details>
          <summary>‚öôÔ∏è Settings</summary>
          <div class="settings-body">
            <div class="form-group">
              <label for="modelSelect">Model</label>
              <input type="text" id="modelSelect" list="modelList" placeholder="e.g. google/gemini-2.0-flash-001" />
              <datalist id="modelList">
                <option value="google/gemini-2.0-flash-001">
                <option value="anthropic/claude-3.5-sonnet:beta">
                <option value="openai/gpt-4o">
                <option value="deepseek/deepseek-chat">
              </datalist>
            </div>

            <div class="form-group">
              <label for="apiKey">OpenRouter API Key</label>
              <input type="password" id="apiKey" placeholder="sk-or-v1-..." />
              <div class="button-row">
                <button id="saveSettingsBtn" class="secondary">Save & Test Connection</button>
                <button id="traceBtn" class="secondary">Copy trace</button>
              </div>
              <div id="connectionStatus" class="status-message"></div>
            </div>
          </div>
        </details>
      </div>
    </div>

    <h2 class="collapsible-header">Manual Tool Execution</h2>
    <div class="section-content">
      <div class="form-group">
        <label for="toolNames">Tool</label>
        <select id="toolNames"></select>
      </div>

      <div class="form-group">
        <label for="inputArgsText">Input Arguments</label>
        <textarea id="inputArgsText">{"text": "hello world"}</textarea>
      </div>

      <div class="form-group">
        <button id="executeBtn">Execute Tool</button>
      </div>

      <pre id="toolResults"></pre>
    </div>
  </div>

  <!-- Security confirmation dialog for mutation-tier inferred tools -->
  <dialog id="securityDialog" class="security-dialog">
    <div class="dialog-body">
      <p class="dialog-title">‚ö†Ô∏è <span id="dialogToolName"></span></p>
      <p class="dialog-desc" id="dialogDesc"></p>
      <div class="dialog-actions">
        <button id="dialogCancel" class="btn-cancel">Cancel</button>
        <button id="dialogConfirm" class="btn-danger">Execute</button>
      </div>
    </div>
  </dialog>

  <script type="module" src="sidebar.js"></script>
</body>

</html>